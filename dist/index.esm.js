import e from"react";var r="production"!==process.env.NODE_ENV?Symbol("CONTEXT_LISTENERS"):Symbol(),t=function(t){var n,u,o=e.createContext(t,function(){return 0});return o[r]=new Set,o.Provider=(n=o.Provider,u=o[r],e.memo(function(r){var t=r.value,o=r.children;return"production"!==process.env.NODE_ENV&&"test"!==process.env.NODE_ENV?e.useLayoutEffect(function(){u.forEach(function(e){e(t)})}):u.forEach(function(e){e(t)}),e.createElement(n,{value:t},o)})),delete o.Consumer,o},n=function(t,n){var u=t[r];if("production"!==process.env.NODE_ENV&&!u)throw new Error("useContextSelector requires special context");var o=e.useReducer(function(e){return e+1},0)[1],c=e.useContext(t),f=n(c),i=e.useRef(null);return e.useLayoutEffect(function(){i.current={f:n,v:c,s:f}}),e.useLayoutEffect(function(){var e=function(e){try{if(i.current.v===e||Object.is(i.current.s,i.current.f(e)))return}catch(e){}o()};return u.add(e),function(){u.delete(e)}},[u]),f},u=function(e){return n(e,function(e){return e})};export{t as createContext,u as useContext,n as useContextSelector};
//# sourceMappingURL=index.esm.js.map
